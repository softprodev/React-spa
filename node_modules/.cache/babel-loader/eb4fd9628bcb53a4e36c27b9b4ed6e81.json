{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\project\\\\spa-project\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\project\\\\spa-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\project\\\\spa-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"C:\\\\project\\\\spa-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\project\\\\spa-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"C:\\\\project\\\\spa-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\project\\\\spa-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\project\\\\spa-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\project\\\\spa-project\\\\src\\\\components\\\\common\\\\Card\\\\Card.js\";\nimport React, { Component } from 'react';\nimport styles from './Card.scss';\nimport classNames from 'classnames/bind';\nimport { Link } from 'react-router-dom';\nimport storage from 'lib/storage';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as userActions from 'redux/modules/user';\nimport SNS from './SNS';\nvar cx = classNames.bind(styles);\n\nvar Card =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Card, _Component);\n\n  _createClass(Card, [{\n    key: \"componentDidMount\",\n    //setState UnmountError(메모리 누수 방지)\n    value: function componentDidMount() {\n      this.initializeUserInfo();\n      this._isMounted = true;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    } //set error shouldcomponentupdate 통해서 해결하기\n\n  }]);\n\n  function Card() {\n    var _this;\n\n    _classCallCheck(this, Card);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Card).call(this));\n    _this._isMounted = false;\n    _this.handleLogout =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var UserActions;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              UserActions = _this.props.UserActions;\n              _context.prev = 1;\n              _context.next = 4;\n              return UserActions.logout();\n\n            case 4:\n              _context.next = 9;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n\n            case 9:\n              storage.remove('loggedInfo');\n              window.location.href = '/';\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[1, 6]]);\n    }));\n    _this.initializeUserInfo =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var loggedInfo, UserActions;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              loggedInfo = storage.get('loggedInfo'); // 로그인 정보를 스토라지에서 가져옴.\n\n              if (loggedInfo) {\n                _context2.next = 3;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 3:\n              //로그인정보가 없을시 스탑\n              UserActions = _this.props.UserActions;\n              UserActions.setLoggedInfo(loggedInfo);\n              _context2.prev = 5;\n              _context2.next = 8;\n              return UserActions.checkStatus();\n\n            case 8:\n              _context2.next = 14;\n              break;\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](5);\n              storage.remove('loggedInfo');\n              window.location.href = '/auth/login?expired';\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this, [[5, 10]]);\n    }));\n    _this.state = {\n      showMenu: false\n    };\n    _this.showMenu = _this.showMenu.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.closeMenu = _this.closeMenu.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Card, [{\n    key: \"showMenu\",\n    value: function showMenu(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n\n      if (this._isMounted) {\n        this.setState({\n          showMenu: true\n        }, function () {\n          document.addEventListener('click', _this2.closeMenu);\n        });\n      }\n    }\n  }, {\n    key: \"closeMenu\",\n    value: function closeMenu() {\n      var _this3 = this;\n\n      if (this._isMounted) {\n        this.setState({\n          showMenu: false\n        }, function () {\n          document.removeEventListener('click', _this3.closeMenu);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var user = this.props.user;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: this.state.showMenu ? 'close' : 'open',\n        onClick: this.showMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: cx('bar1'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: cx('bar2'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: cx('bar3'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })), this.state.showMenu ? React.createElement(\"div\", {\n        className: \"menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"submenu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \" \", user.get('logged') ? React.createElement(\"div\", {\n        onClick: this.handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"Logout\") : React.createElement(Link, {\n        to: \"/Auth/Login/local\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Login\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"https://en.wikipedia.org/wiki/Sia_(musician)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"About\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, user.get('logged') ? React.createElement(Link, {\n        to: \"/News\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"News\") : React.createElement(Link, {\n        to: \"/Auth/Login/local\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"News\"), \" \"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/Discography\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Discography\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(SNS, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })))) : null);\n    }\n  }]);\n\n  return Card;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    user: state.user\n  };\n}, function (dispatch) {\n  return {\n    UserActions: bindActionCreators(userActions, dispatch)\n  };\n})(Card);","map":{"version":3,"sources":["C:\\project\\spa-project\\src\\components\\common\\Card\\Card.js"],"names":["React","Component","styles","classNames","Link","storage","connect","bindActionCreators","userActions","SNS","cx","bind","Card","initializeUserInfo","_isMounted","handleLogout","UserActions","props","logout","console","log","remove","window","location","href","loggedInfo","get","setLoggedInfo","checkStatus","state","showMenu","closeMenu","event","preventDefault","setState","document","addEventListener","removeEventListener","user","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styles from './Card.scss';\nimport classNames from 'classnames/bind';\nimport { Link } from 'react-router-dom';\nimport storage from 'lib/storage';\nimport { connect } from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport * as userActions from 'redux/modules/user';\nimport SNS from './SNS';\n\nconst cx = classNames.bind(styles);\n\n\nclass Card extends Component {\n_isMounted=false; \n//setState UnmountError(메모리 누수 방지)\n  handleLogout = async () => {\n    const { UserActions } = this.props;\n    try{\n      await UserActions.logout();\n    } catch (e) {\n      console.log(e);\n    }\n\n    storage.remove('loggedInfo');\n    window.location.href= '/';\n  }\n\n  initializeUserInfo = async () => {\n    const loggedInfo = storage.get('loggedInfo'); // 로그인 정보를 스토라지에서 가져옴.\n    if(!loggedInfo) return ; //로그인정보가 없을시 스탑\n \n    const { UserActions }  = this.props;\n    UserActions.setLoggedInfo(loggedInfo);\n    try{\n        await UserActions.checkStatus();\n    } catch (e) {\n         storage.remove('loggedInfo');\n         window.location.href = '/auth/login?expired';\n    }\n    }\n    componentDidMount(){\n      this.initializeUserInfo();\n      this._isMounted=true;\n  }\n  componentWillUnmount(){\n    this._isMounted=false;\n  }\n\n  //set error shouldcomponentupdate 통해서 해결하기\n  constructor(){\n    super();\n\n    this.state={\n      showMenu: false,\n    }\n    this.showMenu = this.showMenu.bind(this);\n    this.closeMenu = this.closeMenu.bind(this);\n  }\n  \n  showMenu(event){\n    event.preventDefault();\n    if(this._isMounted){\n    this.setState({  showMenu:true}, () =>{\n      document.addEventListener('click',this.closeMenu);\n    });\n  }\n}\n  closeMenu(){\n if(this._isMounted){     \n    this.setState({showMenu: false}, () => {\n    document.removeEventListener('click',this.closeMenu);\n  });\n}\n  }\n  render() {\n    const { user } = this.props;\n    return (\n      <div>\n      <div className={this.state.showMenu ? 'close' : 'open'} onClick={this.showMenu}>\n      <div className={cx('bar1')}></div>\n      <div className={cx('bar2')}></div>\n      <div className={cx('bar3')}></div>\n      \n      </div>\n {\n   this.state.showMenu ? (\n     <div className=\"menu\"\n     >\n     <ul className=\"submenu\">\n    <li> { user.get('logged') ? <div onClick={this.handleLogout}>Logout</div> \n    :  <Link to='/Auth/Login/local'>Login</Link>}</li>\n    <li><a href='https://en.wikipedia.org/wiki/Sia_(musician)'>About</a></li>\n   <li>{ user.get('logged')?  <Link to='/News'>News</Link> : <Link to='/Auth/Login/local'>News</Link> } </li>\n    <li><Link to='/Discography'>Discography</Link></li>\n    <li><SNS/></li>\n \n    \n     </ul>\n      \n     </div>\n   ) : ( null ) \n }\n      </div>\n    );\n  }\n}\n\n\nexport default connect(\n  (state) => ({\n    user: state.user\n  }),\n  (dispatch) => ({\n      UserActions : bindActionCreators(userActions,dispatch)\n  })\n)(Card);"]},"metadata":{},"sourceType":"module"}